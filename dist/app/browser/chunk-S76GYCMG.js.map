{
  "version": 3,
  "sources": ["src/app/core/services/interview.api.ts", "src/app/core/services/interview.mock.ts", "src/app/core/services/interview.service.ts", "src/app/features/interview/interview-page.component.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\n\r\nimport { catchError, Observable, of } from 'rxjs';\r\n\r\nimport { environment } from '../../../environments/environment';\r\nimport { InterviewRequest, InterviewResponse } from '../models/interview.models';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InterviewApi {\r\n  private readonly baseUrl = environment.api.baseUrl;\r\n\r\n  constructor(private readonly http: HttpClient) {}\r\n\r\n  chat(request: InterviewRequest): Observable<InterviewResponse> {\r\n    let params = new HttpParams();\r\n\r\n    if (request.vacancySummary) {\r\n      params = params.set('vacancySummary', request.vacancySummary);\r\n    }\r\n\r\n    if (request.locale) {\r\n      params = params.set('locale', request.locale);\r\n    }\r\n\r\n    return this.http\r\n      .post<InterviewResponse>(`${this.baseUrl}/api/interview/chat`, request.chatMessage, {\r\n        params\r\n      })\r\n      .pipe(\r\n        catchError((err: unknown) => {\r\n          console.error(err);\r\n          return of({\r\n            conversationId: request.chatMessage.conversationId,\r\n            assistantMessage: 'Backend is unavailable. Please try again later.',\r\n            coachingTips: []\r\n          });\r\n        })\r\n      );\r\n  }\r\n}\r\n", "import { Injectable } from '@angular/core';\r\n\r\nimport { delay, Observable, of } from 'rxjs';\r\n\r\nimport { InterviewRequest, InterviewResponse } from '../models/interview.models';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InterviewMock {\r\n  chat(request: InterviewRequest): Observable<InterviewResponse> {\r\n    const conversationId = request.chatMessage.conversationId ?? this.generateConversationId();\r\n    const isInit = !request.chatMessage.conversationId;\r\n\r\n    const assistantMessage = isInit\r\n      ? 'Hi! Let\\'s start the interview. Tell me briefly about your most recent project.'\r\n      : this.buildAssistantReply(request.chatMessage.message);\r\n\r\n    const response: InterviewResponse = {\r\n      conversationId,\r\n      assistantMessage,\r\n      coachingTips: isInit\r\n        ? ['Answer concisely (1-2 minutes)', 'Highlight impact with numbers', 'Mention your role and scope']\r\n        : ['Use STAR structure', 'Focus on decisions and trade-offs', 'End with measurable results']\r\n    };\r\n\r\n    return of(response).pipe(delay(700));\r\n  }\r\n\r\n  private buildAssistantReply(userMessage: string): string {\r\n    const trimmed = userMessage.trim();\r\n\r\n    if (!trimmed) {\r\n      return 'Send a short answer and I will ask the next question.';\r\n    }\r\n\r\n    return `Thanks! You said: \"${trimmed}\". What was the biggest challenge and how did you solve it?`;\r\n  }\r\n\r\n  private generateConversationId(): string {\r\n    return `conv_${Date.now()}_${Math.random().toString(16).slice(2)}`;\r\n  }\r\n}\r\n", "import { Injectable } from '@angular/core';\r\n\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { environment } from '../../../environments/environment';\r\nimport { InterviewRequest, InterviewResponse } from '../models/interview.models';\r\nimport { InterviewApi } from './interview.api';\r\nimport { InterviewMock } from './interview.mock';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InterviewService {\r\n  constructor(\r\n    private readonly interviewApi: InterviewApi,\r\n    private readonly interviewMock: InterviewMock\r\n  ) {}\r\n\r\n  sendMessage(request: InterviewRequest): Observable<InterviewResponse>;\r\n  sendMessage(message: string, conversationId?: string): Observable<InterviewResponse>;\r\n  sendMessage(\r\n    requestOrMessage: InterviewRequest | string,\r\n    conversationId?: string\r\n  ): Observable<InterviewResponse> {\r\n    const request: InterviewRequest =\r\n      typeof requestOrMessage === 'string'\r\n        ? {\r\n            chatMessage: {\r\n              message: requestOrMessage,\r\n              conversationId\r\n            }\r\n          }\r\n        : requestOrMessage;\r\n\r\n    if (environment.api.useMockApi) {\r\n      return this.interviewMock.chat(request);\r\n    }\r\n\r\n    return this.interviewApi.chat(request);\r\n  }\r\n}\r\n", "import { CommonModule } from '@angular/common';\r\nimport { Component, inject } from '@angular/core';\r\nimport { FormBuilder, ReactiveFormsModule, Validators } from '@angular/forms';\r\n\r\nimport { finalize } from 'rxjs';\r\n\r\nimport { InputTextModule } from 'primeng/inputtext';\r\nimport { ButtonModule } from 'primeng/button';\r\n\r\nimport { InterviewService } from '../../core/services/interview.service';\r\n\r\ntype ChatItem = {\r\n  role: 'user' | 'assistant';\r\n  text: string;\r\n};\r\n\r\n@Component({\r\n  selector: 'app-interview-page',\r\n  standalone: true,\r\n  imports: [CommonModule, ReactiveFormsModule, InputTextModule, ButtonModule],\r\n  template: `\r\n    <section class=\"rounded-lg border bg-white p-6\">\r\n      <h1 class=\"text-lg font-semibold\">Interview</h1>\r\n      <p class=\"mt-1 text-sm text-slate-600\">Mini interview chat.</p>\r\n\r\n      <div class=\"mt-4 grid gap-2\" *ngIf=\"messages.length; else emptyState\">\r\n        <div\r\n          *ngFor=\"let item of messages\"\r\n          class=\"rounded-md border px-3 py-2 text-sm\"\r\n          [class.bg-slate-50]=\"item.role === 'assistant'\"\r\n          [class.bg-white]=\"item.role === 'user'\"\r\n        >\r\n          <div class=\"text-xs font-semibold text-slate-600\">{{ item.role }}</div>\r\n          <div class=\"mt-1 whitespace-pre-wrap\">{{ item.text }}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <ng-template #emptyState>\r\n        <div class=\"mt-4 rounded-md border bg-slate-50 p-4 text-sm text-slate-600\">\r\n          Send the first message to start the interview.\r\n        </div>\r\n      </ng-template>\r\n\r\n      <form class=\"mt-4 flex gap-2\" [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\r\n        <input\r\n          pInputText\r\n          class=\"w-full\"\r\n          type=\"text\"\r\n          formControlName=\"message\"\r\n          placeholder=\"Type a message...\"\r\n        />\r\n        <p-button\r\n          type=\"submit\"\r\n          [label]=\"isLoading ? 'Loading...' : 'Send'\"\r\n          [disabled]=\"form.invalid || isLoading\"\r\n        ></p-button>\r\n      </form>\r\n\r\n      <div class=\"mt-3 text-sm text-slate-600\" *ngIf=\"isLoading\">Loading...</div>\r\n    </section>\r\n  `\r\n})\r\nexport class InterviewPageComponent {\r\n  private readonly fb = inject(FormBuilder);\r\n  private readonly interviewService = inject(InterviewService);\r\n\r\n  readonly form = this.fb.nonNullable.group({\r\n    message: ['', [Validators.required]]\r\n  });\r\n\r\n  isLoading = false;\r\n  conversationId: string | null = null;\r\n  messages: ChatItem[] = [];\r\n\r\n  onSubmit(): void {\r\n    if (this.form.invalid || this.isLoading) {\r\n      return;\r\n    }\r\n\r\n    const message = this.form.getRawValue().message.trim();\r\n    if (!message) {\r\n      return;\r\n    }\r\n\r\n    this.messages = [...this.messages, { role: 'user', text: message }];\r\n    this.form.reset({ message: '' });\r\n\r\n    this.isLoading = true;\r\n\r\n    const request$ = this.conversationId\r\n      ? this.interviewService.sendMessage(message, this.conversationId)\r\n      : this.interviewService.sendMessage(message);\r\n\r\n    request$\r\n      .pipe(finalize(() => (this.isLoading = false)))\r\n      .subscribe({\r\n        next: (res) => {\r\n          if (res.conversationId) {\r\n            this.conversationId = res.conversationId;\r\n          }\r\n          if (res.assistantMessage) {\r\n            this.messages = [...this.messages, { role: 'assistant', text: res.assistantMessage }];\r\n          }\r\n        },\r\n        error: (err: unknown) => console.error(err)\r\n      });\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
